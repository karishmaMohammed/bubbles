<!DOCTYPE html>
<html>
  <head>
    <title>Bubbles App-Dev</title>
    <style>
      canvas {
        border: 2.5px solid black;
        display: block;
        margin: 0 auto;
      }
      #btn{
            position: absolute;
            right: 30%;
            bottom: 25%;
            font-size: 20px;
        }
    </style>
  </head>
  <body>
    <h2 style="text-align: center;">Bubbles App</h2>
    <canvas id="myCanvas" width="600" height="350"></canvas>
    <button id="btn" onclick="reset()">Reset</button>
    <script>
      const canvas = document.getElementById("myCanvas");
      const context = canvas.getContext("2d");


      // In order to Draw circles
      const colors = ["yellow", "blue", "red", "green"];
      for (let i = 0; i < colors.length; i++) {
        context.beginPath();
        context.arc(50, 70 * (i + 1), 30, 0, 2 * Math.PI);
        context.fillStyle = colors[i];
        context.fill();
        context.lineWidth = 1.5;
		    context.strokeStyle = 'black';
		    context.stroke();
      }


      //In order to Draw line
      for (let i = 0; i < colors.length; i++) {
        context.beginPath();
        context.moveTo(400, 70 * (i + 1));
        context.lineTo(500, 70 * (i + 1));
        context.lineWidth = 5;
        context.strokeStyle = 'black';
        context.stroke();
      }


      // Handle click event when we click on the circle
      canvas.addEventListener("click", handleClick);


      function handleClick(event){
        const x = event.offsetX;
        const y = event.offsetY;


        for (let i = 0; i < colors.length; i++) {
          if (x > 30 && x < 70 && y > 70 * i && y < 70 * (i + 1)) {
            // Line is Moving towards circles
            let xPos = 500;
            const intervalID = setInterval(() => {
              context.clearRect(80, 70 * (i + 1) - 40,50, 20);
              context.beginPath();
              context.moveTo(400, 70 * (i + 1));
              context.lineTo(xPos, 70 * (i + 1));
              context.stroke();
              xPos -= 5;


              if (xPos < 70) {
                clearInterval(intervalID);
                // when line hits circle Change its color to gray circle
                context.beginPath();
                context.arc(50, 70 * (i + 1), 30, 0, 2 * Math.PI);
                context.fillStyle = 'gray';
                context.fill();
              }
            }, 10);
          }
        }
      }


      // Reset function hits when reset button is clicked
      function reset(){
        context.clearRect(0, 0, canvas.width, canvas.height);
        for (let i = 0; i < colors.length; i++) {
          // Circles resetting into its original colors
          context.beginPath();
          context.arc(50, 70 * (i + 1), 30, 0, 2 * Math.PI);
          context.fillStyle = colors[i];
          context.fill();
          context.lineWidth = 1.5;
		      context.strokeStyle = 'black';
		      context.stroke();

          //Lines moving to its initial position
          context.beginPath();
          context.moveTo(400, 70 * (i + 1));
          context.lineTo(500, 70 * (i + 1));
          context.lineWidth = 5;
          context.strokeStyle = 'black';
          context.stroke();
        }
      }
    </script>
  </body>
</html>



